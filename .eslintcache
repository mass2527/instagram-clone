[{"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\index.js":"1","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\App.js":"2","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\serviceWorker.js":"3","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\app\\store.js":"4","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\Header.js":"5","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\Feed.js":"6","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\Post.js":"7","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\Comment.js":"8","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\firebase\\firebase.js":"9","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\Route\\Login.js":"10","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\features\\userSlice.js":"11","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\DropdownMenu.js":"12","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\Overlay.js":"13","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\CommentSender.js":"14","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\PostImageLoader.js":"15","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\Profile.js":"16","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\SquarePost.js":"17","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\RefreshLoader.js":"18","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\ProfilePosts.js":"19","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\utils\\util.js":"20","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\PostIcons.js":"21","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\PostRightLoader.js":"22","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\ProfileHeader.js":"23","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\SmallProfileInfoContainer.js":"24","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\ProfileMiddle.js":"25","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\FeedRight.js":"26","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\FeedRightRow.js":"27","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\GlobalStyle.js":"28"},{"size":782,"mtime":1609819345580,"results":"29","hashOfConfig":"30"},{"size":2172,"mtime":1609727344788,"results":"31","hashOfConfig":"30"},{"size":5141,"mtime":499162500000,"results":"32","hashOfConfig":"30"},{"size":186,"mtime":1609253602837,"results":"33","hashOfConfig":"30"},{"size":2514,"mtime":1609820648435,"results":"34","hashOfConfig":"30"},{"size":3193,"mtime":1609671834981,"results":"35","hashOfConfig":"30"},{"size":5282,"mtime":1609819470329,"results":"36","hashOfConfig":"30"},{"size":3513,"mtime":1609820613579,"results":"37","hashOfConfig":"30"},{"size":674,"mtime":1609324817607,"results":"38","hashOfConfig":"30"},{"size":5698,"mtime":1609731805979,"results":"39","hashOfConfig":"30"},{"size":470,"mtime":1609313453960,"results":"40","hashOfConfig":"30"},{"size":8303,"mtime":1609671551426,"results":"41","hashOfConfig":"30"},{"size":9093,"mtime":1609820582915,"results":"42","hashOfConfig":"30"},{"size":1912,"mtime":1609676893806,"results":"43","hashOfConfig":"30"},{"size":925,"mtime":1609510279878,"results":"44","hashOfConfig":"30"},{"size":2377,"mtime":1609665538611,"results":"45","hashOfConfig":"30"},{"size":4058,"mtime":1609662641708,"results":"46","hashOfConfig":"30"},{"size":523,"mtime":1609581869999,"results":"47","hashOfConfig":"30"},{"size":583,"mtime":1609665584778,"results":"48","hashOfConfig":"30"},{"size":190,"mtime":1609819842636,"results":"49","hashOfConfig":"30"},{"size":3589,"mtime":1609730450231,"results":"50","hashOfConfig":"30"},{"size":2108,"mtime":1609660850518,"results":"51","hashOfConfig":"30"},{"size":5182,"mtime":1609664022437,"results":"52","hashOfConfig":"30"},{"size":1164,"mtime":1609664844819,"results":"53","hashOfConfig":"30"},{"size":2464,"mtime":1609665401512,"results":"54","hashOfConfig":"30"},{"size":1182,"mtime":1609820765296,"results":"55","hashOfConfig":"30"},{"size":1551,"mtime":1609819899448,"results":"56","hashOfConfig":"30"},{"size":536,"mtime":1609819232640,"results":"57","hashOfConfig":"30"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1dya9m5",{"filePath":"60","messages":"61","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"62","usedDeprecatedRules":"63"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"70","messages":"71","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"72","usedDeprecatedRules":"63"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"75","messages":"76","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"95","usedDeprecatedRules":"63"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"102","messages":"103","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"104","usedDeprecatedRules":"63"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"115","messages":"116","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"117","messages":"118","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\index.js",[],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\App.js",["119"],"import React, { useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport Header from './components/Header';\r\nimport Feed from './components/Feed';\r\nimport { Switch, Route, useLocation } from 'react-router-dom';\r\nimport Login from './Route/Login';\r\nimport { auth } from './firebase/firebase';\r\nimport { signIn, signOut } from './features/userSlice';\r\nimport { useDispatch } from 'react-redux';\r\nimport Overlay from './components/Overlay';\r\nimport Profile from './components/Profile';\r\n\r\nconst S = {\r\n  App: styled.div`\r\n    background-color: rgb(250, 250, 250);\r\n    min-height: 100vh;\r\n  `,\r\n\r\n  AppBody: styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n\r\n    align-items: center;\r\n    /* padding-top: 30px; */\r\n  `,\r\n};\r\n\r\nfunction App() {\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    auth.onAuthStateChanged((currentUser) => {\r\n      if (currentUser) {\r\n        dispatch(\r\n          signIn({\r\n            displayName: currentUser.displayName,\r\n            email: currentUser.email,\r\n            userId: currentUser.uid,\r\n            userImageURL: currentUser.photoURL,\r\n          })\r\n        );\r\n      } else {\r\n        dispatch(signOut());\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <S.App>\r\n      <Switch>\r\n        <Route exact path=\"/login\">\r\n          <S.AppBody>\r\n            <Login />\r\n          </S.AppBody>\r\n        </Route>\r\n\r\n        <Route exact path=\"/p/:postId/\">\r\n          <Header />\r\n          <S.AppBody>\r\n            {location.state?.userName ? <Profile /> : <Feed />}\r\n            <Overlay />\r\n          </S.AppBody>\r\n        </Route>\r\n\r\n        <Route exact path=\"/:userName/\">\r\n          <Header />\r\n          <S.AppBody>\r\n            <Profile />\r\n          </S.AppBody>\r\n        </Route>\r\n\r\n        <Route exact path=\"/:userName/:option/\">\r\n          <Header />\r\n          <S.AppBody>\r\n            <Profile />\r\n          </S.AppBody>\r\n        </Route>\r\n\r\n        <Route exact path=\"/\">\r\n          <Header />\r\n          <S.AppBody>\r\n            <Feed />\r\n          </S.AppBody>\r\n        </Route>\r\n      </Switch>\r\n    </S.App>\r\n  );\r\n}\r\n\r\nexport default App;\r\n",["120","121"],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\serviceWorker.js",[],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\app\\store.js",[],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\Header.js",[],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\Feed.js",["122"],"import React, { useState, useEffect, useRef } from 'react';\r\nimport styled from 'styled-components';\r\nimport Post from './Post';\r\nimport db from '../firebase/firebase';\r\nimport RefreshLoader from './RefreshLoader';\r\nimport FeedRight from './FeedRight';\r\n\r\nconst S = {\r\n  Feed: styled.div`\r\n    max-width: 975px;\r\n    width: 100%;\r\n    padding: 0px 20px;\r\n    box-sizing: border-box;\r\n\r\n    display: flex;\r\n\r\n    @media (max-width: 1000px) {\r\n      justify-content: center;\r\n      padding: 0px;\r\n    }\r\n  `,\r\n\r\n  FeedLeft: styled.div`\r\n    max-width: 614px;\r\n    width: 100%;\r\n    margin-right: 28px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n\r\n    @media (max-width: 1000px) {\r\n      width: 100%;\r\n      margin: 0px;\r\n      max-width: 602px;\r\n    }\r\n  `,\r\n\r\n  LoadingContainer: styled.div`\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: white;\r\n\r\n    display: grid;\r\n    place-items: center;\r\n  `,\r\n};\r\n\r\nfunction Feed() {\r\n  const [posts, setPosts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [numberOfPosts, setNumberOfPosts] = useState(() => {\r\n    db.collection('posts').onSnapshot((snapshot) => {\r\n      setNumberOfPosts(snapshot.docs.length);\r\n    });\r\n  });\r\n\r\n  const postsPerPage = 5;\r\n  const feedRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    db.collection('posts')\r\n      .orderBy('timestamp', 'desc')\r\n      .limit(postsPerPage * currentPage)\r\n      .onSnapshot((snapshot) => {\r\n        setPosts(\r\n          snapshot.docs.map((doc) => ({ postId: doc.id, ...doc.data() }))\r\n        );\r\n\r\n        setLoading(false);\r\n      });\r\n  }, [currentPage]);\r\n\r\n  useEffect(() => {\r\n    function handleScroll() {\r\n      const lastPost = feedRef?.current?.lastElementChild;\r\n\r\n      if (\r\n        // 60 === margin bottom of lastPost\r\n        Math.round(lastPost?.getBoundingClientRect().bottom) + 60 ===\r\n          window.innerHeight &&\r\n        currentPage < Math.ceil(numberOfPosts / postsPerPage)\r\n      ) {\r\n        setCurrentPage((currentPage) => currentPage + 1);\r\n      }\r\n    }\r\n\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, [posts]);\r\n\r\n  return (\r\n    <>\r\n      {loading && <RefreshLoader />}\r\n      <S.Feed>\r\n        <S.FeedLeft ref={feedRef}>\r\n          {posts.map(\r\n            ({\r\n              caption,\r\n              displayName,\r\n              imageURL,\r\n              postId,\r\n              timestamp,\r\n              title,\r\n              userId,\r\n              userImageURL,\r\n            }) => (\r\n              <Post\r\n                key={postId}\r\n                caption={caption}\r\n                displayName={displayName}\r\n                imageURL={imageURL}\r\n                postId={postId}\r\n                title={title}\r\n                userId={userId}\r\n                userImageURL={userImageURL}\r\n                timestamp={new Date(timestamp?.toDate()).toUTCString()}\r\n              />\r\n            )\r\n          )}\r\n        </S.FeedLeft>\r\n\r\n        <FeedRight />\r\n      </S.Feed>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Feed;\r\n","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\Post.js",["123","124"],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\Comment.js",["125"],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\firebase\\firebase.js",[],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\Route\\Login.js",["126"],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\features\\userSlice.js",[],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\DropdownMenu.js",[],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\Overlay.js",["127","128"],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\CommentSender.js",[],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\PostImageLoader.js",[],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\Profile.js",[],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\SquarePost.js",["129"],"import React, { useEffect, useRef, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport ChatBubbleIcon from '@material-ui/icons/ChatBubble';\r\nimport db from '../firebase/firebase';\r\nimport { useHistory, useLocation, useParams } from 'react-router-dom';\r\n\r\nconst S = {\r\n  SquarePost: styled.div`\r\n    width: calc(33.3333333333333333333333% - 18.6666666666666666666666666px);\r\n    max-width: 293px;\r\n    margin-bottom: 28px;\r\n    height: ${(props) => props.height}px;\r\n    position: relative;\r\n    cursor: pointer;\r\n\r\n    :not(:nth-child(3n)) {\r\n      margin-right: 28px;\r\n    }\r\n\r\n    @media (max-width: 735px) {\r\n      width: calc(33.3333333333333333333333% - 2px);\r\n      margin-bottom: 3px;\r\n\r\n      :not(:nth-child(3n)) {\r\n        margin-right: 3px;\r\n      }\r\n    }\r\n  `,\r\n\r\n  Post: styled.img`\r\n    width: 100%;\r\n    height: 100%;\r\n    display: block;\r\n\r\n    :hover {\r\n    }\r\n  `,\r\n\r\n  Loader: styled.div`\r\n    position: absolute;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: #efefef;\r\n  `,\r\n\r\n  Overlay: styled.div`\r\n    position: absolute;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: rgba(0, 0, 0, 0.3);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  `,\r\n\r\n  IconContainer: styled.div`\r\n    color: white;\r\n    margin: 0px 10px;\r\n    display: flex;\r\n    align-items: center;\r\n    height: 40px;\r\n\r\n    > .MuiSvgIcon-root {\r\n      margin-right: 5px;\r\n    }\r\n  `,\r\n\r\n  Number: styled.div`\r\n    margin-bottom: 5px;\r\n    font-weight: bold;\r\n  `,\r\n};\r\n\r\nfunction SquarePost({ postId, imageURL, title, displayName }) {\r\n  const divRef = useRef(null);\r\n  const imageRef = useRef(null);\r\n  const [imageWidth, setImageWidth] = useState(500);\r\n  const [loading, setLoading] = useState(false);\r\n  const [overlayOption, setOverlayOption] = useState(false);\r\n  const [numberOfComments, setNumberOfComments] = useState(0);\r\n  const [numberOfHearts, setNumberOfHearts] = useState(0);\r\n  const currentPost = db.collection('posts').doc(postId);\r\n  const history = useHistory();\r\n  const { userName } = useParams();\r\n  const location = useLocation();\r\n  const [postUserInfo, setPostUserInfo] = useState({});\r\n\r\n  function clickPost() {\r\n    history.push(`/p/${postId}/`, {\r\n      userName,\r\n      option: location.state.option,\r\n      photoURL: postUserInfo?.photoURL,\r\n      displayName: postUserInfo?.displayName,\r\n    });\r\n  }\r\n\r\n  function handleResize() {\r\n    setImageWidth(divRef?.current?.clientWidth);\r\n  }\r\n\r\n  function handleLoad() {\r\n    setLoading(false);\r\n  }\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    setImageWidth(divRef.current.clientWidth);\r\n\r\n    db.collection('users')\r\n      .doc(displayName)\r\n      .get()\r\n      .then((res) => {\r\n        setPostUserInfo(res.data());\r\n      });\r\n\r\n    currentPost.collection('comments').onSnapshot((snapshot) => {\r\n      setNumberOfComments(snapshot.docs?.length);\r\n    });\r\n\r\n    currentPost.collection('hearts').onSnapshot((snapshot) => {\r\n      setNumberOfHearts(snapshot.docs?.length);\r\n    });\r\n\r\n    imageRef.current.addEventListener('load', handleLoad);\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  return (\r\n    <S.SquarePost\r\n      onClick={clickPost}\r\n      onMouseEnter={() => setOverlayOption(true)}\r\n      onMouseLeave={() => setOverlayOption(false)}\r\n      height={imageWidth}\r\n      ref={divRef}\r\n    >\r\n      <S.Post ref={imageRef} src={imageURL} alt={title} />\r\n      {loading && <S.Loader></S.Loader>}\r\n      {overlayOption && (\r\n        <S.Overlay>\r\n          <S.IconContainer>\r\n            <FavoriteIcon />\r\n            <S.Number>{numberOfHearts}</S.Number>\r\n          </S.IconContainer>\r\n          <S.IconContainer>\r\n            <ChatBubbleIcon />\r\n            <S.Number>{numberOfComments}</S.Number>\r\n          </S.IconContainer>\r\n        </S.Overlay>\r\n      )}\r\n    </S.SquarePost>\r\n  );\r\n}\r\n\r\nexport default SquarePost;\r\n","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\RefreshLoader.js",[],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\ProfilePosts.js",[],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\utils\\util.js",[],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\PostIcons.js",["130"],"import React, { useEffect, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\r\nimport ChatBubbleOutlineIcon from '@material-ui/icons/ChatBubbleOutline';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { selectUser } from '../features/userSlice';\r\nimport db from '../firebase/firebase';\r\nimport firebase from 'firebase';\r\n\r\nconst S = {\r\n  PostIcons: styled.div`\r\n    padding: 0px 16px;\r\n    height: 40px;\r\n    margin-top: 4px;\r\n    cursor: pointer;\r\n    display: flex;\r\n    align-items: center;\r\n    box-sizing: border-box;\r\n    border-top: 1px solid\r\n      ${(props) => (props.borderTopOption ? 'lightgrey' : 'transparent')};\r\n\r\n    .MuiSvgIcon-root {\r\n      margin-right: 10px;\r\n    }\r\n  `,\r\n\r\n  PostHeart: styled.div`\r\n    padding: 0px 16px;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    color: #262626;\r\n  `,\r\n};\r\n\r\nfunction PostIcons({\r\n  postId,\r\n  caption,\r\n  displayName,\r\n  imageURL,\r\n  timestamp,\r\n  title,\r\n  userId,\r\n  userImageURL,\r\n  commentIconDisableOption,\r\n  borderTopOption,\r\n}) {\r\n  const user = useSelector(selectUser);\r\n  const history = useHistory();\r\n  const [hearts, setHearts] = useState([]);\r\n  const [postUserInfo, setPostUserInfo] = useState({});\r\n\r\n  useEffect(() => {\r\n    db.collection('users')\r\n      .doc(displayName)\r\n      .get()\r\n      .then((res) => {\r\n        setPostUserInfo(res.data());\r\n      });\r\n\r\n    db.collection('posts')\r\n      .doc(postId)\r\n      .collection('hearts')\r\n      .onSnapshot((snapshot) => {\r\n        setHearts(snapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() })));\r\n      });\r\n  }, []);\r\n\r\n  function clickHeart() {\r\n    if (!user) return history.push('/login');\r\n    const liked = hearts.find((heart) => heart?.userId === user?.userId);\r\n\r\n    // prettier-ignore\r\n    const heartsCollection = db.collection('posts').doc(postId).collection('hearts');\r\n    // prettier-ignore\r\n    const DocInLikedCollection = db.collection('users').doc(user?.displayName).collection('liked').doc(postId);\r\n\r\n    if (liked) {\r\n      heartsCollection.doc(liked.id).delete();\r\n      DocInLikedCollection.delete();\r\n    } else {\r\n      heartsCollection.add({\r\n        userImageURL: user.userImageURL,\r\n        displayName: user.displayName,\r\n        userId: user?.userId,\r\n      });\r\n\r\n      DocInLikedCollection.set({\r\n        caption,\r\n        displayName,\r\n        imageURL,\r\n        id: postId,\r\n        timestamp,\r\n        title,\r\n        userId,\r\n        userImageURL,\r\n        timestampWhenClickLiked: firebase.firestore.FieldValue.serverTimestamp(),\r\n      });\r\n    }\r\n  }\r\n\r\n  function clickViewAll() {\r\n    if (!user) return history.push('/login');\r\n\r\n    history.push(`/p/${postId}/`, {\r\n      displayName,\r\n      photoURL: postUserInfo.photoURL,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <S.PostIcons borderTopOption={borderTopOption}>\r\n        {hearts.find((heart) => heart?.userId === user?.userId) ? (\r\n          <FavoriteIcon\r\n            color=\"secondary\"\r\n            onClick={() => {\r\n              if (!user) return history.push('/login');\r\n              clickHeart();\r\n            }}\r\n          />\r\n        ) : (\r\n          <FavoriteBorderIcon onClick={clickHeart} />\r\n        )}\r\n\r\n        <ChatBubbleOutlineIcon\r\n          onClick={!commentIconDisableOption && clickViewAll}\r\n        />\r\n      </S.PostIcons>\r\n\r\n      <S.PostHeart>liked {hearts.length}</S.PostHeart>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PostIcons;\r\n","C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\PostRightLoader.js",[],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\ProfileHeader.js",[],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\SmallProfileInfoContainer.js",[],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\ProfileMiddle.js",[],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\FeedRight.js",[],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\components\\FeedRightRow.js",[],"C:\\Users\\mass2\\Desktop\\react\\react-redux\\app\\src\\GlobalStyle.js",[],{"ruleId":"131","severity":1,"message":"132","line":47,"column":6,"nodeType":"133","endLine":47,"endColumn":8,"suggestions":"134"},{"ruleId":"135","replacedBy":"136"},{"ruleId":"137","replacedBy":"138"},{"ruleId":"131","severity":1,"message":"139","line":91,"column":6,"nodeType":"133","endLine":91,"endColumn":13,"suggestions":"140"},{"ruleId":"131","severity":1,"message":"141","line":142,"column":28,"nodeType":"142","endLine":142,"endColumn":35},{"ruleId":"131","severity":1,"message":"143","line":143,"column":6,"nodeType":"133","endLine":143,"endColumn":8,"suggestions":"144"},{"ruleId":"131","severity":1,"message":"145","line":100,"column":6,"nodeType":"133","endLine":100,"endColumn":8,"suggestions":"146"},{"ruleId":"131","severity":1,"message":"147","line":96,"column":6,"nodeType":"133","endLine":96,"endColumn":8,"suggestions":"148"},{"ruleId":"149","severity":1,"message":"150","line":176,"column":10,"nodeType":"142","messageId":"151","endLine":176,"endColumn":17},{"ruleId":"131","severity":1,"message":"152","line":247,"column":6,"nodeType":"133","endLine":247,"endColumn":8,"suggestions":"153"},{"ruleId":"131","severity":1,"message":"154","line":130,"column":6,"nodeType":"133","endLine":130,"endColumn":8,"suggestions":"155"},{"ruleId":"131","severity":1,"message":"143","line":68,"column":6,"nodeType":"133","endLine":68,"endColumn":8,"suggestions":"156"},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.","ArrayExpression",["157"],"no-native-reassign",["158"],"no-negated-in-lhs",["159"],"React Hook useEffect has missing dependencies: 'currentPage' and 'numberOfPosts'. Either include them or remove the dependency array.",["160"],"The ref value 'imageRef.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'imageRef.current' to a variable inside the effect, and use that variable in the cleanup function.","Identifier","React Hook useEffect has missing dependencies: 'displayName' and 'postId'. Either include them or remove the dependency array.",["161"],"React Hook useEffect has a missing dependency: 'name'. Either include it or remove the dependency array.",["162"],"React Hook useEffect has a missing dependency: 'usersCollection'. Either include it or remove the dependency array.",["163"],"no-unused-vars","'scrollY' is assigned a value but never used.","unusedVar","React Hook useEffect has missing dependencies: 'clickOverlay', 'postId', and 'pressESC'. Either include them or remove the dependency array.",["164"],"React Hook useEffect has missing dependencies: 'currentPost' and 'displayName'. Either include them or remove the dependency array.",["165"],["166"],{"desc":"167","fix":"168"},"no-global-assign","no-unsafe-negation",{"desc":"169","fix":"170"},{"desc":"171","fix":"172"},{"desc":"173","fix":"174"},{"desc":"175","fix":"176"},{"desc":"177","fix":"178"},{"desc":"179","fix":"180"},{"desc":"171","fix":"181"},"Update the dependencies array to be: [dispatch]",{"range":"182","text":"183"},"Update the dependencies array to be: [currentPage, numberOfPosts, posts]",{"range":"184","text":"185"},"Update the dependencies array to be: [displayName, postId]",{"range":"186","text":"187"},"Update the dependencies array to be: [name]",{"range":"188","text":"189"},"Update the dependencies array to be: [usersCollection]",{"range":"190","text":"191"},"Update the dependencies array to be: [clickOverlay, postId, pressESC]",{"range":"192","text":"193"},"Update the dependencies array to be: [currentPost, displayName]",{"range":"194","text":"195"},{"range":"196","text":"187"},[1251,1253],"[dispatch]",[2275,2282],"[currentPage, numberOfPosts, posts]",[3115,3117],"[displayName, postId]",[2001,2003],"[name]",[2161,2163],"[usersCollection]",[5782,5784],"[clickOverlay, postId, pressESC]",[3309,3311],"[currentPost, displayName]",[1747,1749]]